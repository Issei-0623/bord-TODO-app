/* =========================================================
   Header（タイトル中央・右上メニュー固定）
   - タイトルは中央寄せ
   - グローバルメニューはヘッダーの右上に固定
   - 右側にメニューボタン分の余白を確保（padding-right）
   ========================================================= */
.auth-title {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100px;
  background-color: #f25c5c;
  color: #fff;
  font-size: 24px;
  font-weight: 700;
  line-height: 1;
  margin: 0 0 40px;
  padding: 0 96px; /* 右上ボタンが重ならないように余白確保 */
}

/* 右上メニューの実位置。ヘッダーの高さやボタンの見栄えとセットで調整 */
.auth-title .global-menu.dropdown {
  position: absolute !important;
  top: 30px;   /* ヘッダー上端から合わせた値 */
  right: 80px; /* 右端から合わせた値） */
  transform: none;
  margin: 0;
  z-index: 20; /* ドロップダウンがカードより前面に来るように */
}

/* メニューアイコンのタップ領域を確保。数値はヘッダーとバランスで調整 */
.auth-title .menu-btn {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  background: rgba(255,255,255,.18);
  cursor: pointer;
}
.auth-title .menu-btn:hover { background: rgba(255,255,255,.28); }

/* ドロップダウンはボタン直下に出す */
.auth-title .dropdown-menu {
  right: 0;
  top: calc(100% + 8px);
}


/* =========================================================
   Top page（ボード一覧のカード並び）
   - JS の per_page 計算（カード幅 380px / gap 30px）とセットで維持
   - .cards-container は nowrap：横スクロールさせずカラム数で制御
   ========================================================= */
.authenticate-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px;

  .cards-container {
    display: flex;
    gap: 30px;
    justify-content: center;
    flex-wrap: nowrap;
    width: 100%;
    margin: 0 auto;
    align-items: stretch; /* 各列のカード高さをそろえる */
  }
}

/* 1 カラムあたりのカード幅（→ per_page と相関） */
.authenticate-card {
  width: 380px;
  min-height: 650px;
  padding: 20px 30px;
  background-color: #fff;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  border: 1px solid rgba(0, 0, 0, 0.1);
}
.authenticate-card:hover {
  background-color: #d7d7d7;
  transition: background-color 0.2s ease;
}

.title-row { display: flex; align-items: center; gap: 8px; }
.board-head {
  display: flex; align-items: center; justify-content: space-between;
  color: #333; font-size: 20px; font-weight: bold; margin: 2px 0 4px;
}
.board-label { letter-spacing: .2px; }
.avatar--sm { width: 24px; height: 24px; }
.board-title { font-weight: 600; }

/* =========================================================
   Dropdown（共通パターン）
   - Stimulus の dropdown#toggle と連動（.hidden を付け外し）
   - z-index はヘッダー/カードより手前に出る値に
   ========================================================= */
.dropdown {
  margin-left: auto;
  position: relative;

  .dropbtn { width: 22px; height: 22px; cursor: pointer; display: block; }

  .dropdown-menu {
    display: none;
    position: absolute;
    right: 0; top: 26px;
    min-width: 240px;
    background: #fff;
    border: 1px solid #eee;
    border-radius: 10px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
    padding: 6px 0;
    z-index: 20;

    a {
      display: block;
      padding: 10px 14px;
      text-decoration: none;
      color: #333;
      font-size: 14px;

      &:hover { background: rgba(0, 221, 255, 0.3); }
    }
  }
  .dropdown-menu:not(.hidden) { display: block; }
}
.hidden { display: none !important; }

/* Avatar（共通サイズ） */
.avatar { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; }

/* タスク一覧（カード内の縦積み） */
.task-list { display: flex; flex-direction: column; gap: 12px; margin-top: 2px; }

/* コメント数を右下に常時表示するため、下余白を確保 */
.task-card {
  background: #efefef;
  border: 1px solid #e5e5e5;
  border-radius: 12px;
  padding: 12px;
  position: relative;
  padding-bottom: 28px; /* コメント表示スペース */
}
.task-card__row { display: flex; align-items: center; justify-content: space-between; }
.task-title { font-weight: 600; text-decoration: none; }
.task-card__deadline { font-size: 0.85rem; color: #666; margin-top: 2px; }
.deadline-label { font-weight: bold; margin-right: 2px; }
.task-card__meta { display: flex; align-items: center; gap: 8px; margin-top: 8px; color: #777; font-size: 13px; }

.board-description { margin: 2px 0 6px; font-size: 14px; color: #333; line-height: 1.4; }

/* フッターのボタンをカード最下部へ押し下げる */
.card-footer {
  margin-top: auto;
  display: flex;
  justify-content: center;
  padding-top: 12px;
}

/* カード全体をリンクにする箇所（アクセシビリティ配慮で a にも付与） */
.board-head-link, .task-empty-link { text-decoration: none; color: inherit; display: block; }

/* タスクが無いときの空表示 */
.task-empty {
  background: #efefef;
  border: 1px dashed #e0e0e0;
  border-radius: 10px;
  padding: 16px;
  text-align: center;
  color: #777;
  font-size: 14px;

  .btn-sm { margin-top: 8px; padding: 6px 10px; font-size: 13px; }
}

/* ページ送り（画面端に固定） */
.page-arrow {
  position: fixed;
  top: 50%; transform: translateY(-50%);
  width: 44px; height: 44px; border-radius: 50%;
  background: #555; border: 1px solid #fff;
  box-shadow: 0 4px 14px rgba(0,0,0,.12);
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; color: #fff; text-decoration: none;
  z-index: 50;
  transition: background-color 0.2s ease;
}
.page-arrow--left { left: 16px; }
.page-arrow--right { right: 16px; }
.page-arrow:hover { background: #333; }

/* コメント数は 0 のとき非表示 */
.task-card__comments {
  position: absolute; right: 12px; bottom: 10px;
  display: flex; align-items: center; gap: 4px;
  color: #777; font-size: 18px;
}
.task-card__comments.is-zero { display: none; }

/* SP では 1 カラム表示に（JS の 899px ブレークポイントと合わせる） */
@media (max-width: 899px) {
  .authenticate-page .cards-container { flex-direction: column; align-items: center; }
}


/* =========================================================
   Board show（ボード詳細）
   ========================================================= */
.auth-title-task {
  position: relative;
  width: 100%; height: 100px;
  background-color: #f25c5c; color: #fff;
  display: flex; align-items: center; justify-content: center;
  font-size: 32px; font-weight: bold;
}
.authenticate-page-task {
  display: flex; flex-direction: column; align-items: center; padding: 40px;
}

.board-show-page {
  max-width: 1500px; margin: 0 auto; padding: 0 20px;
  display: flex; flex-direction: column; gap: 32px;
}
.board-header {
  h2 { font-size: 24px; font-weight: bold; margin-bottom: 4px; }
  .board-description { font-size: 14px; color: #666; }
}

.board-task-list { display: flex; flex-direction: column; gap: 20px; }
.board-task-card {
  background: #efefef; padding: 16px; border: 1px solid #ddd;
  border-radius: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}
.board-task-header { display: flex; justify-content: space-between; align-items: center;
  h4 { font-size: 16px; font-weight: bold; }
}
.board-task-actions { a { margin-left: 8px; } }
.board-task-content { margin: 8px 0; font-size: 14px; }
.board-task-meta { font-size: 12px; color: #888; }
.board-task-eyecatch img.board-task-image { margin-top: 8px; max-width: 100%; height: auto; border-radius: 4px; }

/* 投稿フォーム（boards/show 内） */
.board-task-form {
  background: #efefef; padding: 16px; border: 1px solid #ddd; border-radius: 8px;
  width: 100%; max-width: 1200px; margin: 2rem auto; box-sizing: border-box;

  .form-group {
    margin-bottom: 12px;
    label { font-weight: bold; display: block; margin-bottom: 4px; }
    input, textarea {
      width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background: #fff;
    }
  }
  .form-actions { display: flex; justify-content: center; margin-top: 16px; gap: 12px; }
  .btn-success {
    background-color: #f25c5c; border-color: #f25c5c;
    padding: 8px 20px; font-size: 16px; font-weight: bold; border-radius: 6px; color: #ddd;
    &:hover { background-color: #da3535; }
  }
}


/* =========================================================
   Task detail & Comments
   ========================================================= */
.task-detail-container {
  width: 100%; max-width: 1500px; margin: 2rem auto; padding: 1.5rem;
  border: 1px solid #ddd; border-radius: 10px; background-color: #efefef;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); position: relative;
}
.task-detail-header { position: relative; padding: 12px 44px 0 44px; }
.task-detail-title { font-size: 1.5rem; font-weight: bold; color: #333; text-align: center; margin: 0; }
.task-detail-header .dropdown { position: absolute; top: 10px; right: 12px; }
.task-detail-header .dropdown .dropdown-menu { position: absolute; right: 0; top: 26px; }
.task-detail-content { margin-top: 1rem; line-height: 1.6; }
.task-detail-eyecatch { margin-top: 1rem; text-align: center;
  img.task-eyecatch { max-width: 80%; height: auto; border-radius: 0.5rem; }
}
.task-detail-deadline {
  margin-top: 1rem;
  .deadline-label { font-weight: bold; margin-right: 0.3rem; }
}
.task-detail-meta { display: flex; align-items: center; margin-top: 1rem; gap: 0.5rem; color: #555; }

.task-detail-comments { width: 100%; max-width: 1500px; margin: 2rem auto; padding: 0 1.5rem; }
.task-detail--comment-card {
  background: #efefef; border: 1px solid #ddd; border-radius: 8px;
  padding: 1rem; margin-bottom: 1rem; width: 100%; max-width: 1500px;
  margin-left: 0; margin-right: 0; position: relative;
}
.task-detail--comment-meta {
  display: flex; align-items: center; gap: .5rem; margin-bottom: .3rem;
  .avatar { width: 40px; height: 40px; border-radius: 50%; }
  .nickname { font-weight: 600; }
  .timestamp { margin-left: auto; font-size: .8rem; color: gray; }
}
/* コメントの三点メニュー位置 */
.task-detail--comment-card .dropdown { position: absolute; top: 8px; right: 8px; }
.task-detail--comment-card .dropdown .dropdown-menu { position: absolute; right: 0; top: 26px; }

.nickname { font-weight: bold; }
.timestamp { font-size: 0.8rem; color: gray; margin-left: auto; }
.task-detail--comment-content { margin-left: 48px; } /* アバターの幅に合わせる */

.task-detail-actions { position: absolute; top: 12px; right: 16px; }
.task-detail-actions .dropbtn { width: 30px; height: 30px; cursor: pointer; display: block; }

.btn-success { border: none; outline: none; }
form .field { display: flex; flex-direction: column; margin-bottom: 1rem; }
.comment-form-container { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; }
.comment-form { width: 100%; max-width: 1200px; }
.comment-form textarea.form-control { width: 100% !important; min-height: 140px; }
.comment-form .form-actions .btn { font-size: 16px; border: none; outline: none; box-shadow: none; }
.btn-primary, .btn-success { border: none; outline: none; box-shadow: none; }


/* =========================================================
   Boards index & Board form
   ========================================================= */
.board-index-page {
  max-width: 1500px; margin: 0 auto; padding: 0 20px;
  display: flex; flex-direction: column; gap: 20px;
}
.board-card { background: #efefef; border: 1px solid #e5e5e5; border-radius: 12px; padding: 16px; position: relative; }
.board-card__head { position: relative; display: flex; align-items: center; justify-content: space-between; }
.board-link { font-weight: 600; text-decoration: none; color: inherit; }
.board-card__description { margin: 8px 0; font-size: 14px; color: #333; line-height: 1.4; }
.board-card__meta { display: flex; align-items: center; gap: 8px; color: #777; font-size: 13px; }
.board-card__tasks { margin-left: auto; display: flex; align-items: center; gap: 6px; font-size: 18px; color: #777; }
.board-card__tasks.is-zero { display: none; }
.board-index-actions { display: flex; justify-content: center; gap: 12px; margin-top: 24px; }

/* ボードカード内の三点メニュー */
.board-card .dropdown { position: absolute; top: 8px; right: 12px; }
.board-card .dropdown .dropbtn { width: 22px; height: 22px; cursor: pointer; display: block; }
.board-card .dropdown .dropdown-menu { top: 26px; right: 0; }
.board-card__tasks span { font-size: 16px; font-weight: 600; line-height: 1; }

/* ボード新規/編集フォーム */
.board-form-container { width: 100%; max-width: 1200px; margin: 2rem auto; padding: 0 20px; }
.board-form-card {
  background: #efefef; border: 1px solid #ddd; border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,.05); padding: 1.5rem;
}
.board-form-card .form-group { margin-bottom: 12px; }
.board-form-card label { font-weight: bold; display: block; margin-bottom: 4px; }
.board-form-card .form-control { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background: #fff; }
.board-form-card .form-actions { margin-top: 12px; display: flex; justify-content: center; gap: 12px; }
.board-form-card .btn { font-size: 16px; border: none; outline: none; box-shadow: none; }


/* =========================================================
   Profile（表示・編集）
   ========================================================= */
.profile-page { width: 100%; max-width: 1200px; margin: 2rem auto; padding: 0 20px; }
.profile-card { background: #efefef; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,.05); padding: 1.5rem; }

.profile-card__header { display: flex; align-items: center; gap: 16px;
  .sub { color: #777; margin-top: 2px; }
}
.profile-avatar { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
.profile-card__body { margin-top: 12px; }

.profile-row {
  display: grid; grid-template-columns: 120px 1fr; gap: 12px; padding: 10px 0;
  border-bottom: 1px solid #e8e8e8;
  label { color: #666; font-weight: 600; }
  p, span { color: #333; }
  &:last-child { border-bottom: none; }
}
.profile-actions { margin-top: 16px; display: flex; gap: 12px; justify-content: center; }

.profile-form-container { width: 100%; max-width: 1200px; margin: 2rem auto; padding: 0 20px; }
.profile-form-card { background: #efefef; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,.05); padding: 1.5rem; }
.profile-form-card .form-group {
  margin-bottom: 12px;
  &.inline { display: flex; align-items: center; gap: 10px; label { margin-bottom: 0; } }
}
.profile-form-card label { font-weight: bold; display: block; margin-bottom: 4px; }
.profile-form-card .form-control { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background: #fff; }
.profile-form-card .form-actions { margin-top: 12px; display: flex; justify-content: center; gap: 12px; }
.profile-form-card .btn { font-size: 16px; border: none; outline: none; box-shadow: none; }

.current-avatar {
  margin-bottom: 12px;
  .hint { font-size: 12px; color: #777; margin-top: 4px; }
  .profile-avatar { width: 96px; height: 96px; border-radius: 50%; object-fit: cover; display: block; margin-top: 4px; }
}


/* =========================================================
   Devise（ログイン/登録など）
   ========================================================= */
.auth-page { max-width: 1200px; margin: 0 auto; padding: 0 24px 40px; }
.auth-hero {
  background: #f25c5c; color: #fff; text-align: center;
  font-weight: 700; font-size: 24px; line-height: 1;
  padding: 18px 12px; border-radius: 6px; margin: 16px 0 28px;
}
.auth-center { display: flex; justify-content: center; }
.auth-card { background: #f3f3f3; border: 1px solid #ddd; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,.05); padding: 28px 32px; }
.auth-card--wide { width: 100%; max-width: 720px; }

/* フォーム共通。各画面で使い回すためここに集約 */
.field { display: grid; gap: 8px; margin: 14px 0; }
.field.inline { display: flex; align-items: center; gap: 8px; }
.input-label { font-size: 14px; color: #444; }
.input-box { width: 100%; padding: 10px 12px; border: 1px solid #ccc; border-radius: 6px; background: #fff; }
.actions { margin-top: 18px; display: flex; justify-content: center; gap: 12px; }

/* 既存の .btn-primary/.btn-success に合わせ、枠・影は統一して無効化 */
.submit-button {
  width: 100%; padding: 12px 14px; border-radius: 8px;
  background: #f25c5c; color: #fff; font-weight: 700; border: none; outline: none; box-shadow: none;
  &:hover { background: #da3535; }
}
.btn-primary, .btn-success { border: none; outline: none; box-shadow: none; }

.devise-links { margin-top: 10px; display: flex; gap: 16px; flex-wrap: wrap; }

/* === Flash（フラッシュメッセージ） === */
.flash-wrapper {
  position: fixed;
  top: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 9999;
}

/* 見た目とアニメーション */
.flash {
  min-width: 260px;
  max-width: 80vw;
  padding: 10px 14px;
  border: 2px solid #000;  
  border-radius: 8px;
  color: #111;
  box-shadow: 0 4px 16px rgba(0,0,0,.15);
  opacity: 1;
  transform: translateY(0);
  transition: opacity .22s ease, transform .22s ease;
}
.flash.is-leaving {
  opacity: 0;
  transform: translateY(-6px);
}

.flash--notice { background: #efefef;}  /* 成功 */
.flash--alert  { background: #fbff00 }  /* 警告/エラー */

.flash__close {
  background: transparent;
  border: 0;
  color: inherit;
  font-size: 16px;
  line-height: 1;
  cursor: pointer;
  margin-left: 8px;
  float: right;
  opacity: .8;
}
.flash__close:hover { opacity: 1; }


/* =========================================================
   Responsive（SP 最適化）
   - 高さ・文字サイズ・ボタンサイズを縮小
   ========================================================= */
@media (max-width: 768px) {
  /* ヘッダー調整 */
  .auth-title {
    height: 70px;
    font-size: 18px;
    padding: 0 48px;
  }

  .auth-title__text {
    font-size: 20px;
  }

  .auth-title .global-menu.dropdown {
    top: 20px;
    right: 16px;
  }

  .auth-title .menu-btn {
    width: 36px;
    height: 36px;
  }

  .auth-title-task {
    font-size: 28px !important;
  }

  /* カード */
  .authenticate-page .cards-container {
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }

  .authenticate-card {
    width: 100%;
    max-width: 95%;
    min-height: auto;
    padding: 16px;
  }

  /* ボード新規/編集フォーム */
  .board-form-container {
    width: 100%;
    max-width: 95%;
    margin: 1.5rem auto 0;
    padding: 0 12px;
    display: flex;
    justify-content: center;
  }

  .board-form-card {
    width: 100%;
    max-width: 360px;
    padding: 16px;
    box-sizing: border-box;
  }

  /* ===== フォームのボタンを縦並びにして幅を揃える ===== */
  .board-form-card .form-actions,
  .comment-form .form-actions,
  .profile-form-card .form-actions {
    flex-direction: column;
    gap: 10px;
    align-items: stretch;
  }

  .board-form-card .btn,
  .comment-form .btn,
  .profile-form-card .btn {
    width: 100%;
    font-size: 14px;
    padding: 12px 0;
  }

  /* ===== タスク詳細カードの上の余白 ===== */
  .task-detail-container {
    width: 90%;
    margin: 1.5rem auto;
    padding: 16px;
  }

  /* ===== コメントボタンエリア ===== */
  .comment-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
  }

  .comment-actions .btn {
    width: 100%;
    text-align: center;
    font-size: 14px;
    padding: 12px 0;
  }

  /* ===== プロフィールページの文字サイズを少し小さく ===== */
  .profile-row label,
  .profile-row p,
  .profile-row span {
    font-size: 14px;
  }
}
